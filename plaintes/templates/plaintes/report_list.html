{% extends 'plaintes/base.html' %}
{% load static %}

{% block content %}
<div class="container-fluid mt-8">
    <div class="row">
        <!-- Sidebar -->
        <div class="col-md-3 sidebar bg-white p-6 rounded-lg shadow-md sticky top-20 h-fit">
            <h4 class="text-xl font-semibold text-gray-800 mb-4">Menu</h4>
            <ul class="list-group space-y-3">
                <li class="list-group-item flex items-center p-3 rounded-md hover:bg-gray-100 transition duration-200">
                    <i class="fas fa-tachometer-alt mr-3 text-blue-600"></i>
                    <a href="{% url 'dashboard' %}" class="text-gray-700 hover:text-blue-600">Tableau de bord</a>
                </li>
                <li class="list-group-item flex items-center p-3 rounded-md hover:bg-gray-100 transition duration-200">
                    <i class="fas fa-plus-circle mr-3 text-blue-600"></i>
                    <a href="{% url 'create_report' %}" class="text-gray-700 hover:text-blue-600">Nouveau signalement</a>
                </li>
                <li class="list-group-item flex items-center p-3 rounded-md hover:bg-gray-100 transition duration-200">
                    <i class="fas fa-bell mr-3 text-blue-600"></i>
                    <a href="{% url 'notification_list' %}" class="text-gray-700 hover:text-blue-600">Notifications</a>
                </li>
            </ul>
        </div>

        <!-- Liste des plaintes -->
        <div class="col-md-6">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">Plaintes</h2>
            {% for report in reports %}
            <div class="card mb-6 bg-white shadow-md rounded-lg border border-gray-100">
                <div class="card-body p-6">
                    <p class="text-gray-800 text-lg">{{ report.description }}</p>
                    <div class="flex justify-between items-center mt-3">
                        <small class="text-gray-500">{{ report.location }} - {{ report.created_at|date:"d M Y, H:i" }}</small>
                        <span class="badge bg-{% if report.status == 'resolved' %}success{% elif report.status == 'in_progress' %}warning{% else %}secondary{% endif %} px-3 py-1 rounded-full">
                            {{ report.status }}
                        </span>
                    </div>
                    {% if report.media %}
                    <img src="{{ report.media.url }}" class="img-fluid rounded mt-4 max-h-96 w-full object-cover" alt="Media">
                    {% endif %}
                    <a href="{% url 'report_detail' report.id %}" class="btn btn-link text-blue-600 mt-4 inline-block">Voir détails</a>
                </div>
            </div>
            {% empty %}
            <p class="text-gray-600">Aucune plainte pour le moment.</p>
            {% endfor %}
        </div>

        <!-- Statistiques rapides -->
        <div class="col-md-3 bg-white p-6 rounded-lg shadow-md sticky top-20 h-fit">
            <h4 class="text-xl font-semibold text-gray-800 mb-4">Statistiques rapides</h4>
            <div class="space-y-3">
                <p class="text-gray-700"><i class="fas fa-list mr-2 text-blue-600"></i> Total: {{ reports.count }}</p>
                <p class="text-gray-700"><i class="fas fa-check-circle mr-2 text-green-600"></i> Résolues: </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}